<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Admin - Dantas Contábil</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6a0dad;
            --primary-light: #9c27b0;
            --accent: #adff00;
            --dark: #121212;
            --light: #e0e0e0;
            --gray: #757575;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Montserrat', sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
        }
        
        .admin-container {
            display: flex;
            min-height: 100vh;
        }
        
        .sidebar {
            width: 250px;
            background-color: var(--dark);
            color: var(--light);
            padding: 20px 0;
        }
        
        .sidebar-header {
            padding: 0 20px 20px;
            border-bottom: 1px solid var(--primary-dark);
        }
        
        .sidebar-nav ul {
            list-style: none;
        }
        
        .sidebar-nav a {
            display: block;
            padding: 12px 20px;
            color: var(--light);
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .sidebar-nav a:hover {
            background-color: var(--primary);
            color: white;
        }
        
        .sidebar-nav a i {
            margin-right: 10px;
        }
        
        .main-content {
            flex: 1;
            padding: 20px;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid #ddd;
        }
        
        .logout-btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }
        
        .form-control {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        textarea.form-control {
            min-height: 150px;
        }
        
        .btn {
            padding: 10px 20px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn:hover {
            background-color: var(--primary-light);
        }
        
        .btn-accent {
            background-color: var(--accent);
            color: #333;
        }
        
        .table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .table th, .table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        .table th {
            background-color: #f5f5f5;
        }
        
        .action-btn {
            padding: 5px 10px;
            margin-right: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .edit-btn {
            background-color: #4CAF50;
            color: white;
        }
        
        .delete-btn {
            background-color: #f44336;
            color: white;
        }
        
        .login-container {
            max-width: 400px;
            margin: 100px auto;
            padding: 30px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .login-title {
            text-align: center;
            margin-bottom: 30px;
            color: var(--primary);
        }
        
        .login-btn {
            width: 100%;
            padding: 12px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }

        /* Loading states */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0,0,0,0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .loading-spinner {
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--primary);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Feedback messages */
        .feedback-message {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 5px;
            color: white;
            font-weight: bold;
            z-index: 10000;
            animation: fadeIn 0.3s ease;
        }

        .feedback-message.success {
            background-color: #4CAF50;
        }

        .feedback-message.error {
            background-color: #F44336;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Image preview */
        .image-preview {
            max-width: 200px;
            max-height: 200px;
            margin-top: 10px;
            border: 1px solid #ddd;
            padding: 5px;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- Loading Overlay -->
        <div class="loading-overlay" v-if="loading">
            <div class="loading-spinner"></div>
        </div>

        <!-- Login Screen -->
        <div id="login-screen" class="login-container" v-if="!user">
            <h1 class="login-title">Painel Administrativo</h1>
            <div class="form-group">
                <label>Email</label>
                <input type="email" class="form-control" v-model="loginEmail">
            </div>
            <div class="form-group">
                <label>Senha</label>
                <input type="password" class="form-control" v-model="loginPassword">
            </div>
            <button class="login-btn" @click="doLogin">Entrar</button>
            <p v-if="loginError" style="color: red; margin-top: 15px;">{{ loginError }}</p>
        </div>
        
        <!-- Admin Panel -->
        <div class="admin-container" v-if="user">
            <div class="sidebar">
                <div class="sidebar-header">
                    <h2>Dantas Contábil</h2>
                    <p>Painel Administrativo</p>
                </div>
                <nav class="sidebar-nav">
                    <ul>
                        <li><a href="#" @click="currentSection = 'home'"><i class="fas fa-home"></i> Home</a></li>
                        <li><a href="#" @click="currentSection = 'about'"><i class="fas fa-info-circle"></i> Sobre</a></li>
                        <li><a href="#" @click="currentSection = 'services'"><i class="fas fa-cog"></i> Serviços</a></li>
                        <li><a href="#" @click="currentSection = 'testimonials'"><i class="fas fa-quote-left"></i> Depoimentos</a></li>
                        <li><a href="#" @click="currentSection = 'team'"><i class="fas fa-users"></i> Equipe</a></li>
                        <li><a href="#" @click="currentSection = 'contact'"><i class="fas fa-envelope"></i> Contato</a></li>
                    </ul>
                </nav>
            </div>
            
            <div class="main-content">
                <div class="header">
                    <h2>{{ getSectionTitle() }}</h2>
                    <button class="logout-btn" @click="doLogout"><i class="fas fa-sign-out-alt"></i> Sair</button>
                </div>
                
                <!-- Home Content -->
                <div v-if="currentSection === 'home'" class="card">
                    <h3>Conteúdo da Home</h3>
                    <div class="form-group">
                        <label>Título Principal</label>
                        <input type="text" class="form-control" v-model="siteContent.heroTitle">
                    </div>
                    <div class="form-group">
                        <label>Subtítulo</label>
                        <textarea class="form-control" v-model="siteContent.heroSubtitle"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Texto Botão WhatsApp</label>
                        <input type="text" class="form-control" v-model="siteContent.whatsappButtonText">
                    </div>
                    <div class="form-group">
                        <label>Número WhatsApp (com código país)</label>
                        <input type="text" class="form-control" v-model="siteContent.whatsappNumber" placeholder="Ex: 5582981714181">
                    </div>
                    <div class="form-group">
                        <label>Texto Botão Serviços</label>
                        <input type="text" class="form-control" v-model="siteContent.servicesButtonText">
                    </div>
                    <div class="form-group">
                        <label>Texto Download App</label>
                        <input type="text" class="form-control" v-model="siteContent.downloadText">
                    </div>
                    <div class="form-group">
                        <label>Link Google Play</label>
                        <input type="text" class="form-control" v-model="siteContent.playstoreLink">
                    </div>
                    <div class="form-group">
                        <label>Link App Store</label>
                        <input type="text" class="form-control" v-model="siteContent.appstoreLink">
                    </div>
                    <button class="btn" @click="saveSiteContent">Salvar Alterações</button>
                    <div v-if="saveMessage" class="feedback-message" :class="saveMessage.type">{{ saveMessage.text }}</div>
                </div>
                
                <!-- About Content -->
                <div v-if="currentSection === 'about'" class="card">
                    <h3>Conteúdo Sobre Nós</h3>
                    <div class="form-group">
                        <label>Título</label>
                        <input type="text" class="form-control" v-model="siteContent.aboutTitle">
                    </div>
                    <div class="form-group">
                        <label>Descrição</label>
                        <textarea class="form-control" v-model="siteContent.aboutDescription"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Missão</label>
                        <textarea class="form-control" v-model="siteContent.aboutMission"></textarea>
                    </div>
                    <div class="form-group">
                        <label>URL da Imagem</label>
                        <input type="text" class="form-control" v-model="siteContent.aboutImage" placeholder="Cole a URL da imagem aqui">
                        <img v-if="siteContent.aboutImage" :src="siteContent.aboutImage" class="image-preview">
                    </div>

                    <!-- Funcao para adicionar icon select -->
                    <h4>Recursos</h4>
                    <div v-for="(feature, index) in siteContent.features" :key="index" class="card" style="margin-top: 15px;">
                        <div class="form-group">
                            <label>Título do Recurso</label>
                            <input type="text" class="form-control" v-model="feature.title">
                        </div>
                        <div class="form-group">
                            <label>Descrição do Recurso</label>
                            <textarea class="form-control" v-model="feature.description"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Ícone</label>
                            <div class="icon-selector">
                                <button class="btn btn-icon" @click="toggleIconSelector(index)">
                                    <i :class="feature.icon || 'fas fa-question'"></i>
                                </button>
                                <div v-if="feature.showIconSelector" class="icon-selector-dropdown">
                                    <div class="icon-search">
                                        <input type="text" v-model="iconSearch" placeholder="Pesquisar ícone...">
                                    </div>
                                    <div class="icon-grid">
                                        <button v-for="icon in filteredIcons" :key="icon" 
                                                class="btn btn-icon" 
                                                @click="selectIcon(index, icon)"
                                                :title="icon">
                                            <i :class="icon"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <button class="btn delete-btn" @click="removeFeature(index)">Remover Recurso</button>
                    </div>
        
                    <button class="btn btn-accent" @click="addFeature"><i class="fas fa-plus"></i> Adicionar Recurso</button>

                    <button class="btn" @click="saveSiteContent">Salvar Alterações</button>
                    <div v-if="saveMessage" class="feedback-message" :class="saveMessage.type">{{ saveMessage.text }}</div>
                </div>
                
                <!-- Services Management -->
                <div v-if="currentSection === 'services'">
                    <div class="card">
                        <h3>Gerenciar Serviços</h3>
                        <button class="btn btn-accent" @click="showAddService = true"><i class="fas fa-plus"></i> Adicionar Serviço</button>
                        
                        <div v-if="showAddService" class="card" style="margin-top: 20px;">
                            <h4>Adicionar Novo Serviço</h4>
                            <div class="form-group">
                                <label>Nome do Serviço</label>
                                <input type="text" class="form-control" v-model="newService.name">
                            </div>
                            <div class="form-group">
                                <label>Descrição</label>
                                <textarea class="form-control" v-model="newService.description"></textarea>
                            </div>
                            <div class="form-group">
                                <label>Ordem de Exibição</label>
                                <input type="number" class="form-control" v-model="newService.order">
                            </div>
                            <div class="form-group">
                                <label>URL da Imagem</label>
                                <input type="text" class="form-control" v-model="newService.imageUrl" placeholder="Cole a URL da imagem aqui">
                                <img v-if="newService.imageUrl" :src="newService.imageUrl" class="image-preview">
                            </div>
                            <button class="btn" @click="addService">Adicionar Serviço</button>
                            <button class="btn" @click="showAddService = false" style="background-color: #ccc; margin-left: 10px;">Cancelar</button>
                        </div>
                    </div>
                    
                    <div class="card" style="margin-top: 20px;">
                        <h4>Lista de Serviços</h4>
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Ordem</th>
                                    <th>Nome</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="(service, index) in services" :key="service.id">
                                    <td>{{ service.order }}</td>
                                    <td>{{ service.name }}</td>
                                    <td>
                                        <button class="action-btn edit-btn" @click="editService(index)"><i class="fas fa-edit"></i></button>
                                        <button class="action-btn delete-btn" @click="deleteService(service.id)"><i class="fas fa-trash"></i></button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Edit Service Modal -->
                    <div v-if="editingService" class="card" style="margin-top: 20px;">
                        <h4>Editar Serviço</h4>
                        <div class="form-group">
                            <label>Nome do Serviço</label>
                            <input type="text" class="form-control" v-model="editingService.name">
                        </div>
                        <div class="form-group">
                            <label>Descrição</label>
                            <textarea class="form-control" v-model="editingService.description"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Ordem de Exibição</label>
                            <input type="number" class="form-control" v-model="editingService.order">
                        </div>
                        <div class="form-group">
                            <label>URL da Imagem</label>
                            <input type="text" class="form-control" v-model="editingService.imageUrl" placeholder="Cole a URL da imagem aqui">
                            <img v-if="editingService.imageUrl" :src="editingService.imageUrl" class="image-preview">
                        </div>
                        <button class="btn" @click="updateService">Atualizar Serviço</button>
                        <button class="btn" @click="cancelEdit" style="background-color: #ccc; margin-left: 10px;">Cancelar</button>
                    </div>
                </div>
                
                <!-- Testimonials Management -->
                <div v-if="currentSection === 'testimonials'">
                    <div class="card">
                        <h3>Gerenciar Depoimentos</h3>
                        <button class="btn btn-accent" @click="showAddTestimonial = true"><i class="fas fa-plus"></i> Adicionar Depoimento</button>
                        
                        <div v-if="showAddTestimonial" class="card" style="margin-top: 20px;">
                            <h4>Adicionar Novo Depoimento</h4>
                            <div class="form-group">
                                <label>Nome do Cliente</label>
                                <input type="text" class="form-control" v-model="newTestimonial.clientName">
                            </div>
                            <div class="form-group">
                                <label>Cargo/Posição</label>
                                <input type="text" class="form-control" v-model="newTestimonial.clientPosition">
                            </div>
                            <div class="form-group">
                                <label>Depoimento</label>
                                <textarea class="form-control" v-model="newTestimonial.text"></textarea>
                            </div>
                            <div class="form-group">
                                <label>Avaliação (1-5)</label>
                                <input type="number" min="1" max="5" class="form-control" v-model="newTestimonial.rating">
                            </div>
                            <div class="form-group">
                                <label>URL da Foto do Cliente</label>
                                <input type="text" class="form-control" v-model="newTestimonial.imageUrl" placeholder="Cole a URL da imagem aqui">
                                <img v-if="newTestimonial.imageUrl" :src="newTestimonial.imageUrl" class="image-preview">
                            </div>
                            <button class="btn" @click="addTestimonial">Adicionar Depoimento</button>
                            <button class="btn" @click="showAddTestimonial = false" style="background-color: #ccc; margin-left: 10px;">Cancelar</button>
                        </div>
                    </div>
                    
                    <div class="card" style="margin-top: 20px;">
                        <h4>Lista de Depoimentos</h4>
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Cliente</th>
                                    <th>Avaliação</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="(testimonial, index) in testimonials" :key="testimonial.id">
                                    <td>{{ testimonial.clientName }}</td>
                                    <td>
                                        <span v-for="n in 5" :key="n">
                                            <i class="fas fa-star" :style="{ color: n <= testimonial.rating ? '#ffab00' : '#ddd' }"></i>
                                        </span>
                                    </td>
                                    <td>
                                        <button class="action-btn edit-btn" @click="editTestimonial(index)"><i class="fas fa-edit"></i></button>
                                        <button class="action-btn delete-btn" @click="deleteTestimonial(testimonial.id)"><i class="fas fa-trash"></i></button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Edit Testimonial Modal -->
                    <div v-if="editingTestimonial" class="card" style="margin-top: 20px;">
                        <h4>Editar Depoimento</h4>
                        <div class="form-group">
                            <label>Nome do Cliente</label>
                            <input type="text" class="form-control" v-model="editingTestimonial.clientName">
                        </div>
                        <div class="form-group">
                            <label>Cargo/Posição</label>
                            <input type="text" class="form-control" v-model="editingTestimonial.clientPosition">
                        </div>
                        <div class="form-group">
                            <label>Depoimento</label>
                            <textarea class="form-control" v-model="editingTestimonial.text"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Avaliação (1-5)</label>
                            <input type="number" min="1" max="5" class="form-control" v-model="editingTestimonial.rating">
                        </div>
                        <div class="form-group">
                            <label>URL da Foto do Cliente</label>
                            <input type="text" class="form-control" v-model="editingTestimonial.imageUrl" placeholder="Cole a URL da imagem aqui">
                            <img v-if="editingTestimonial.imageUrl" :src="editingTestimonial.imageUrl" class="image-preview">
                        </div>
                        <button class="btn" @click="updateTestimonial">Atualizar Depoimento</button>
                        <button class="btn" @click="cancelEdit" style="background-color: #ccc; margin-left: 10px;">Cancelar</button>
                    </div>
                </div>
                
                <!-- Team Management -->
                <div v-if="currentSection === 'team'">
                    <div class="card">
                        <h3>Gerenciar Equipe</h3>
                        <button class="btn btn-accent" @click="showAddTeamMember = true"><i class="fas fa-plus"></i> Adicionar Membro</button>
                        
                        <div v-if="showAddTeamMember" class="card" style="margin-top: 20px;">
                            <h4>Adicionar Novo Membro</h4>
                            <div class="form-group">
                                <label>Nome</label>
                                <input type="text" class="form-control" v-model="newTeamMember.name">
                            </div>
                            <div class="form-group">
                                <label>Cargo</label>
                                <input type="text" class="form-control" v-model="newTeamMember.position">
                            </div>
                            <div class="form-group">
                                <label>URL da Foto</label>
                                <input type="text" class="form-control" v-model="newTeamMember.imageUrl" placeholder="Cole a URL da imagem aqui">
                                <img v-if="newTeamMember.imageUrl" :src="newTeamMember.imageUrl" class="image-preview">
                            </div>
                            <div class="form-group">
                                <label>Redes Sociais (opcional)</label>
                                <input type="text" class="form-control" v-model="newTeamMember.social.linkedin" placeholder="LinkedIn">
                                <input type="text" class="form-control" v-model="newTeamMember.social.twitter" placeholder="Twitter" style="margin-top: 5px;">
                                <input type="text" class="form-control" v-model="newTeamMember.social.email" placeholder="Email" style="margin-top: 5px;">
                            </div>
                            <button class="btn" @click="addTeamMember">Adicionar Membro</button>
                            <button class="btn" @click="showAddTeamMember = false" style="background-color: #ccc; margin-left: 10px;">Cancelar</button>
                        </div>
                    </div>
                    
                    <div class="card" style="margin-top: 20px;">
                        <h4>Lista de Membros</h4>
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Nome</th>
                                    <th>Cargo</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="(member, index) in team" :key="member.id">
                                    <td>{{ member.name }}</td>
                                    <td>{{ member.position }}</td>
                                    <td>
                                        <button class="action-btn edit-btn" @click="editTeamMember(index)"><i class="fas fa-edit"></i></button>
                                        <button class="action-btn delete-btn" @click="deleteTeamMember(member.id)"><i class="fas fa-trash"></i></button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Edit Team Member Modal -->
                    <div v-if="editingTeamMember" class="card" style="margin-top: 20px;">
                        <h4>Editar Membro da Equipe</h4>
                        <div class="form-group">
                            <label>Nome</label>
                            <input type="text" class="form-control" v-model="editingTeamMember.name">
                        </div>
                        <div class="form-group">
                            <label>Cargo</label>
                            <input type="text" class="form-control" v-model="editingTeamMember.position">
                        </div>
                        <div class="form-group">
                            <label>URL da Foto</label>
                            <input type="text" class="form-control" v-model="editingTeamMember.imageUrl" placeholder="Cole a URL da imagem aqui">
                            <img v-if="editingTeamMember.imageUrl" :src="editingTeamMember.imageUrl" class="image-preview">
                        </div>
                        <div class="form-group">
                            <label>Redes Sociais</label>
                            <input type="text" class="form-control" v-model="editingTeamMember.social.linkedin" placeholder="LinkedIn">
                            <input type="text" class="form-control" v-model="editingTeamMember.social.twitter" placeholder="Twitter" style="margin-top: 5px;">
                            <input type="text" class="form-control" v-model="editingTeamMember.social.email" placeholder="Email" style="margin-top: 5px;">
                        </div>
                        <button class="btn" @click="updateTeamMember">Atualizar Membro</button>
                        <button class="btn" @click="cancelEdit" style="background-color: #ccc; margin-left: 10px;">Cancelar</button>
                    </div>
                </div>
                
                <!-- Contact Content -->
                <div v-if="currentSection === 'contact'" class="card">
                    <h3>Informações de Contato</h3>
                    <div class="form-group">
                        <label>Endereço</label>
                        <input type="text" class="form-control" v-model="siteContent.contactAddress">
                    </div>
                    <div class="form-group">
                        <label>Telefone</label>
                        <input type="text" class="form-control" v-model="siteContent.contactPhone">
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" class="form-control" v-model="siteContent.contactEmail">
                    </div>
                    <div class="form-group">
                        <label>Horário de Atendimento</label>
                        <input type="text" class="form-control" v-model="siteContent.contactHours">
                    </div>
                    <h4>Redes Sociais</h4>
                    <div class="form-group">
                        <label>Facebook</label>
                        <input type="text" class="form-control" v-model="siteContent.socialFacebook">
                    </div>
                    <div class="form-group">
                        <label>Instagram</label>
                        <input type="text" class="form-control" v-model="siteContent.socialInstagram">
                    </div>
                    <div class="form-group">
                        <label>LinkedIn</label>
                        <input type="text" class="form-control" v-model="siteContent.socialLinkedin">
                    </div>
                    <div class="form-group">
                        <label>WhatsApp</label>
                        <input type="text" class="form-control" v-model="siteContent.socialWhatsapp">
                    </div>
                    <h4>Links do Rodapé</h4>
                    <div v-for="(link, index) in siteContent.footerLinks" :key="index" class="card" style="margin-top: 15px;">
                        <div class="form-group">
                            <label>Texto do Link</label>
                            <input type="text" class="form-control" v-model="link.text">
                        </div>
                        <div class="form-group">
                            <label>URL do Link</label>
                            <input type="text" class="form-control" v-model="link.url">
                        </div>
                        <button class="btn delete-btn" @click="removeFooterLink(index)">Remover Link</button>
                    </div>
                    <button class="btn btn-accent" @click="addFooterLink"><i class="fas fa-plus"></i> Adicionar Link</button>
                    <button class="btn" @click="saveSiteContent">Salvar Alterações</button>
                    <div v-if="saveMessage" class="feedback-message" :class="saveMessage.type">{{ saveMessage.text }}</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Vue.js e Firebase -->
    <script src="https://cdn.jsdelivr.net/npm/vue@3.2.31/dist/vue.global.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-storage-compat.js"></script>
    
    <script>
        // Configuração do Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyCk9LG7b9KX1m8QBbQv1ixNNWDlsfBcVp0",
            authDomain: "dantascontabil-ef5dd.firebaseapp.com",
            projectId: "dantascontabil-ef5dd",
            storageBucket: "dantascontabil-ef5dd.appspot.com",
            messagingSenderId: "619232441117",
            appId: "1:619232441117:web:26493c5c5c297a95e7a7f4"
        };

        // Verifica se o Firebase já foi inicializado
        if (!firebase.apps.length) {
            // Inicialize o Firebase
            firebase.initializeApp(firebaseConfig);
        } else {
            firebase.app(); // Se já estiver inicializado, usa a instância existente
        }

        const db = firebase.firestore();
        const auth = firebase.auth();

        // Crie a aplicação Vue
        const { createApp, ref, onMounted } = Vue;
        
        createApp({
            setup() {
                // Dados reativos
                const user = ref(null);
                const loginEmail = ref('');
                const loginPassword = ref('');
                const loginError = ref('');
                const loading = ref(false);
                const currentSection = ref('home');
                const saveMessage = ref(null);
                
                // Conteúdo do site
                const siteContent = ref({
                    heroTitle: '',
                    heroSubtitle: '',
                    whatsappButtonText: '',
                    whatsappNumber: '',
                    servicesButtonText: '',
                    downloadText: '',
                    playstoreLink: '',
                    appstoreLink: '',
                    aboutTitle: '',
                    aboutDescription: '',
                    aboutMission: '',
                    aboutImage: '',
                    features: [],
                    contactAddress: '',
                    contactPhone: '',
                    contactEmail: '',
                    contactHours: '',
                    socialFacebook: '',
                    socialInstagram: '',
                    socialLinkedin: '',
                    socialWhatsapp: '',
                    footerLinks: []
                });
                
                // Serviços
                const services = ref([]);
                const showAddService = ref(false);
                const newService = ref({
                    name: '',
                    description: '',
                    order: 0,
                    imageUrl: ''
                });
                const editingService = ref(null);
                
                // Depoimentos
                const testimonials = ref([]);
                const showAddTestimonial = ref(false);
                const newTestimonial = ref({
                    clientName: '',
                    clientPosition: '',
                    text: '',
                    rating: 5,
                    imageUrl: ''
                });
                const editingTestimonial = ref(null);
                
                // Equipe
                const team = ref([]);
                const showAddTeamMember = ref(false);
                const newTeamMember = ref({
                    name: '',
                    position: '',
                    imageUrl: '',
                    social: {
                        linkedin: '',
                        twitter: '',
                        email: ''
                    }
                });
                const editingTeamMember = ref(null);
                
                // Funções
                const getSectionTitle = () => {
                    const titles = {
                        home: 'Conteúdo da Home',
                        about: 'Sobre Nós',
                        services: 'Serviços',
                        testimonials: 'Depoimentos',
                        team: 'Equipe',
                        contact: 'Contato'
                    };
                    return titles[currentSection.value] || 'Painel Administrativo';
                };
                
                const showMessage = (text, type = 'success') => {
                    saveMessage.value = { text, type };
                    setTimeout(() => {
                        saveMessage.value = null;
                    }, 5000);
                };
                
                const doLogin = async () => {
                    try {
                        loading.value = true;
                        const userCredential = await auth.signInWithEmailAndPassword(
                            loginEmail.value,
                            loginPassword.value
                        );
                        user.value = userCredential.user;
                        loginError.value = '';
                        loadAllData();
                    } catch (error) {
                        console.error('Erro no login:', error);
                        loginError.value = error.message;
                        showMessage('Erro no login: ' + error.message, 'error');
                    } finally {
                        loading.value = false;
                    }
                };
                
                const doLogout = async () => {
                    try {
                        loading.value = true;
                        await auth.signOut();
                        user.value = null;
                        loginEmail.value = '';
                        loginPassword.value = '';
                    } catch (error) {
                        console.error('Erro ao fazer logout:', error);
                        showMessage('Erro ao fazer logout: ' + error.message, 'error');
                    } finally {
                        loading.value = false;
                    }
                };
                
                const loadAllData = async () => {
                    try {
                        loading.value = true;
                        console.log('Carregando todos os dados...');
                        
                        // Carregar conteúdo do site
                        const siteContentDoc = await db.collection('siteContent').doc('main').get();
                        if (siteContentDoc.exists) {
                            siteContent.value = siteContentDoc.data();
                            console.log('Conteúdo do site carregado:', siteContent.value);
                        } else {
                            console.log('Nenhum conteúdo do site encontrado');
                        }
                        
                        // Carregar serviços
                        const servicesSnapshot = await db.collection('services').orderBy('order', 'asc').get();
                        services.value = servicesSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                        console.log('Serviços carregados:', services.value.length);
                        
                        // Carregar depoimentos
                        const testimonialsSnapshot = await db.collection('testimonials').orderBy('createdAt', 'desc').get();
                        testimonials.value = testimonialsSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                        console.log('Depoimentos carregados:', testimonials.value.length);
                        
                        // Carregar equipe
                        const teamSnapshot = await db.collection('team').get();
                        team.value = teamSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                        console.log('Membros da equipe carregados:', team.value.length);
                        
                    } catch (error) {
                        console.error('Erro ao carregar dados:', error);
                        showMessage('Erro ao carregar dados: ' + error.message, 'error');
                    } finally {
                        loading.value = false;
                    }
                };
                
                const saveSiteContent = async () => {
                    try {
                        loading.value = true;
                        await db.collection('siteContent').doc('main').set(siteContent.value, { merge: true });
                        console.log('Conteúdo do site salvo com sucesso');
                        showMessage('Conteúdo salvo com sucesso!');
                    } catch (error) {
                        console.error('Erro ao salvar conteúdo:', error);
                        showMessage('Erro ao salvar conteúdo: ' + error.message, 'error');
                    } finally {
                        loading.value = false;
                    }
                };
                
                const addFeature = () => {
                    siteContent.value.features.push({
                        title: '',
                        description: '',
                        icon: 'fas fa-check'
                    });
                };
                
                const removeFeature = (index) => {
                    siteContent.value.features.splice(index, 1);
                };
                
                const addFooterLink = () => {
                    if (!siteContent.value.footerLinks) {
                        siteContent.value.footerLinks = [];
                    }
                    siteContent.value.footerLinks.push({
                        text: '',
                        url: '#'
                    });
                };
                
                const removeFooterLink = (index) => {
                    siteContent.value.footerLinks.splice(index, 1);
                };
                
                const addService = async () => {
                    try {
                        if (!newService.value.name || !newService.value.description) {
                            throw new Error('Nome e descrição são obrigatórios');
                        }
                        
                        loading.value = true;
                        await db.collection('services').add(newService.value);
                        showMessage('Serviço adicionado com sucesso!');
                        
                        // Recarregar serviços
                        const servicesSnapshot = await db.collection('services').orderBy('order', 'asc').get();
                        services.value = servicesSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                        
                        // Reset form
                        newService.value = { 
                            name: '',
                            description: '',
                            order: services.value.length + 1,
                            imageUrl: ''
                        };
                        showAddService.value = false;
                    } catch (error) {
                        console.error('Erro ao adicionar serviço:', error);
                        showMessage('Erro ao adicionar serviço: ' + error.message, 'error');
                    } finally {
                        loading.value = false;
                    }
                };
                
                const editService = (index) => {
                    editingService.value = { ...services.value[index] };
                    window.scrollTo({
                        top: document.body.scrollHeight,
                        behavior: 'smooth'
                    });
                };
                
                const updateService = async () => {
                    try {
                        if (!editingService.value.name || !editingService.value.description) {
                            throw new Error('Nome e descrição são obrigatórios');
                        }
                        
                        loading.value = true;
                        const { id, ...serviceData } = editingService.value;
                        await db.collection('services').doc(id).update(serviceData);
                        showMessage('Serviço atualizado com sucesso!');
                        
                        // Recarregar serviços
                        const servicesSnapshot = await db.collection('services').orderBy('order', 'asc').get();
                        services.value = servicesSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                        
                        // Reset form
                        editingService.value = null;
                    } catch (error) {
                        console.error('Erro ao atualizar serviço:', error);
                        showMessage('Erro ao atualizar serviço: ' + error.message, 'error');
                    } finally {
                        loading.value = false;
                    }
                };
                
                const deleteService = async (id) => {
                    if (confirm('Tem certeza que deseja excluir este serviço?')) {
                        try {
                            loading.value = true;
                            await db.collection('services').doc(id).delete();
                            showMessage('Serviço excluído com sucesso!');
                            
                            // Recarregar serviços
                            const servicesSnapshot = await db.collection('services').orderBy('order', 'asc').get();
                            services.value = servicesSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                        } catch (error) {
                            console.error('Erro ao excluir serviço:', error);
                            showMessage('Erro ao excluir serviço: ' + error.message, 'error');
                        } finally {
                            loading.value = false;
                        }
                    }
                };
                
                const addTestimonial = async () => {
                    try {
                        if (!newTestimonial.value.clientName || !newTestimonial.value.text) {
                            throw new Error('Nome do cliente e depoimento são obrigatórios');
                        }
                        
                        loading.value = true;
                        await db.collection('testimonials').add({
                            ...newTestimonial.value,
                            createdAt: firebase.firestore.FieldValue.serverTimestamp()
                        });
                        showMessage('Depoimento adicionado com sucesso!');
                        
                        // Recarregar depoimentos
                        const testimonialsSnapshot = await db.collection('testimonials').orderBy('createdAt', 'desc').get();
                        testimonials.value = testimonialsSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                        
                        // Reset form
                        newTestimonial.value = { 
                            clientName: '',
                            clientPosition: '',
                            text: '',
                            rating: 5,
                            imageUrl: ''
                        };
                        showAddTestimonial.value = false;
                    } catch (error) {
                        console.error('Erro ao adicionar depoimento:', error);
                        showMessage('Erro ao adicionar depoimento: ' + error.message, 'error');
                    } finally {
                        loading.value = false;
                    }
                };
                
                const editTestimonial = (index) => {
                    editingTestimonial.value = { ...testimonials.value[index] };
                    window.scrollTo({
                        top: document.body.scrollHeight,
                        behavior: 'smooth'
                    });
                };
                
                const updateTestimonial = async () => {
                    try {
                        if (!editingTestimonial.value.clientName || !editingTestimonial.value.text) {
                            throw new Error('Nome do cliente e depoimento são obrigatórios');
                        }
                        
                        loading.value = true;
                        const { id, ...testimonialData } = editingTestimonial.value;
                        await db.collection('testimonials').doc(id).update(testimonialData);
                        showMessage('Depoimento atualizado com sucesso!');
                        
                        // Recarregar depoimentos
                        const testimonialsSnapshot = await db.collection('testimonials').orderBy('createdAt', 'desc').get();
                        testimonials.value = testimonialsSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                        
                        // Reset form
                        editingTestimonial.value = null;
                    } catch (error) {
                        console.error('Erro ao atualizar depoimento:', error);
                        showMessage('Erro ao atualizar depoimento: ' + error.message, 'error');
                    } finally {
                        loading.value = false;
                    }
                };
                
                const deleteTestimonial = async (id) => {
                    if (confirm('Tem certeza que deseja excluir este depoimento?')) {
                        try {
                            loading.value = true;
                            await db.collection('testimonials').doc(id).delete();
                            showMessage('Depoimento excluído com sucesso!');
                            
                            // Recarregar depoimentos
                            const testimonialsSnapshot = await db.collection('testimonials').orderBy('createdAt', 'desc').get();
                            testimonials.value = testimonialsSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                        } catch (error) {
                            console.error('Erro ao excluir depoimento:', error);
                            showMessage('Erro ao excluir depoimento: ' + error.message, 'error');
                        } finally {
                            loading.value = false;
                        }
                    }
                };
                
                const addTeamMember = async () => {
                    try {
                        if (!newTeamMember.value.name || !newTeamMember.value.position) {
                            throw new Error('Nome e cargo são obrigatórios');
                        }
                        
                        loading.value = true;
                        await db.collection('team').add(newTeamMember.value);
                        showMessage('Membro adicionado com sucesso!');
                        
                        // Recarregar equipe
                        const teamSnapshot = await db.collection('team').get();
                        team.value = teamSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                        
                        // Reset form
                        newTeamMember.value = { 
                            name: '',
                            position: '',
                            imageUrl: '',
                            social: {
                                linkedin: '',
                                twitter: '',
                                email: ''
                            }
                        };
                        showAddTeamMember.value = false;
                    } catch (error) {
                        console.error('Erro ao adicionar membro:', error);
                        showMessage('Erro ao adicionar membro: ' + error.message, 'error');
                    } finally {
                        loading.value = false;
                    }
                };
                
                const editTeamMember = (index) => {
                    editingTeamMember.value = { ...team.value[index] };
                    window.scrollTo({
                        top: document.body.scrollHeight,
                        behavior: 'smooth'
                    });
                };
                
                const updateTeamMember = async () => {
                    try {
                        if (!editingTeamMember.value.name || !editingTeamMember.value.position) {
                            throw new Error('Nome e cargo são obrigatórios');
                        }
                        
                        loading.value = true;
                        const { id, ...memberData } = editingTeamMember.value;
                        await db.collection('team').doc(id).update(memberData);
                        showMessage('Membro atualizado com sucesso!');
                        
                        // Recarregar equipe
                        const teamSnapshot = await db.collection('team').get();
                        team.value = teamSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                        
                        // Reset form
                        editingTeamMember.value = null;
                    } catch (error) {
                        console.error('Erro ao atualizar membro:', error);
                        showMessage('Erro ao atualizar membro: ' + error.message, 'error');
                    } finally {
                        loading.value = false;
                    }
                };
                
                const deleteTeamMember = async (id) => {
                    if (confirm('Tem certeza que deseja excluir este membro?')) {
                        try {
                            loading.value = true;
                            await db.collection('team').doc(id).delete();
                            showMessage('Membro excluído com sucesso!');
                            
                            // Recarregar equipe
                            const teamSnapshot = await db.collection('team').get();
                            team.value = teamSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                        } catch (error) {
                            console.error('Erro ao excluir membro:', error);
                            showMessage('Erro ao excluir membro: ' + error.message, 'error');
                        } finally {
                            loading.value = false;
                        }
                    }
                };
                
                const cancelEdit = () => {
                    editingService.value = null;
                    editingTestimonial.value = null;
                    editingTeamMember.value = null;
                };
                
                // Verificar autenticação ao carregar
                onMounted(() => {
                    auth.onAuthStateChanged((authUser) => {
                        user.value = authUser;
                        if (authUser) {
                            console.log('Usuário autenticado:', authUser.email);
                            loadAllData();
                        } else {
                            console.log('Nenhum usuário autenticado');
                        }
                    });
                });
                
                return {
                    user,
                    loginEmail,
                    loginPassword,
                    loginError,
                    loading,
                    currentSection,
                    saveMessage,
                    siteContent,
                    services,
                    showAddService,
                    newService,
                    editingService,
                    testimonials,
                    showAddTestimonial,
                    newTestimonial,
                    editingTestimonial,
                    team,
                    showAddTeamMember,
                    newTeamMember,
                    editingTeamMember,
                    getSectionTitle,
                    showMessage,
                    doLogin,
                    doLogout,
                    loadAllData,
                    saveSiteContent,
                    addFeature,
                    removeFeature,
                    addFooterLink,
                    removeFooterLink,
                    addService,
                    editService,
                    updateService,
                    deleteService,
                    addTestimonial,
                    editTestimonial,
                    updateTestimonial,
                    deleteTestimonial,
                    addTeamMember,
                    editTeamMember,
                    updateTeamMember,
                    deleteTeamMember,
                    cancelEdit
                };
            }
        }).mount('#app');
    </script>
</body>
</html>